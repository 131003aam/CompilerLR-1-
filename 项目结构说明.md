# 项目结构说明

本项目已重构为模块化结构，代码按功能分为多个文件，使结构更清晰、易于维护。

## 文件结构

```
.
├── types.h              # 数据结构定义
├── lexer.h / lexer.cpp  # 词法分析器
├── parser.h / parser.cpp # LR(1) 语法分析器
├── codegen.h / codegen.cpp # 代码生成器
├── compiler.h / compiler.cpp # 编译器主类（整合所有模块）
├── main.cpp             # 主程序入口
└── .vscode/             # IDE 配置文件
    ├── tasks.json       # 编译任务配置
    ├── launch.json      # 运行和调试配置
    └── settings.json    # 项目设置
```

## 模块说明

### 1. types.h
- **功能**: 定义所有数据结构
- **包含**: Word, Production, Quadruple, LR1Item, Action, TAC, SemItem 等

### 2. lexer.h / lexer.cpp
- **功能**: 词法分析
- **职责**: 
  - 将源代码字符串转换为词法单元（Token）序列
  - 识别关键字、标识符、数字、运算符等
  - 错误检测和报告

### 3. parser.h / parser.cpp
- **功能**: LR(1) 语法分析
- **职责**:
  - 构建 LR(1) 分析表
  - 计算 First 集
  - 生成 LR(1) 项目集
  - 保存分析表到文件（items.txt, table.csv）

### 4. codegen.h / codegen.cpp
- **功能**: 代码生成
- **职责**:
  - 生成三地址码（TAC）
  - 生成四元式
  - 处理循环控制（break, continue）
  - 处理变量声明和赋值
  - 处理表达式计算

### 5. compiler.h / compiler.cpp
- **功能**: 编译器主类
- **职责**:
  - 整合词法分析、语法分析、代码生成模块
  - 协调各模块的工作流程
  - 错误处理和输出格式化

### 6. main.cpp
- **功能**: 程序入口
- **职责**: 创建编译器实例并运行

## 编译和运行

### 方法 1: 使用 IDE（推荐）
1. 按 `F5` 或点击运行按钮
2. 选择 "运行编译器（推荐）"
3. 程序会自动编译并运行

### 方法 2: 命令行编译
```bash
g++ -o compiler.exe main.cpp lexer.cpp parser.cpp codegen.cpp compiler.cpp -std=c++11
```

### 方法 3: 运行
```bash
.\compiler.exe
```

## 优势

1. **模块化**: 每个模块职责单一，易于理解和维护
2. **可扩展**: 新增功能只需修改对应模块
3. **可测试**: 各模块可以独立测试
4. **清晰**: 代码结构一目了然，便于团队协作




