# WHILE循环语句编译器

## 项目简介

本项目实现了一个基于LR(1)方法的WHILE循环语句编译器，能够进行词法分析、语法分析、语义分析，并生成三地址码。

## 功能特性

### ✅ 已实现功能

1. **嵌套循环** - 支持多层嵌套的while循环
2. **复合语句** - 支持多个语句的复合语句块
3. **关系运算** - 支持6种关系运算符：`>`, `<`, `==`, `>=`, `<=`, `!=`
4. **逻辑运算** - 支持3种逻辑运算符：`||`, `&&`, `!`
5. **赋值语句** - 支持变量赋值
6. **算术运算** - 支持加减乘除：`+`, `-`, `*`, `/`
7. **运算优先级** - 正确实现运算符优先级
8. **运算结合性** - 所有运算符左结合
9. **括号** - 支持表达式和逻辑表达式的括号
10. **词法错误报告** - 带位置信息的词法错误报告
11. **语法错误报告** - 带位置信息和期望符号的语法错误报告
12. **自增自减** - 支持 `++i`, `i++`, `--i`, `i--`
13. **continue/break** - 支持循环控制语句
14. **变量声明** - 支持 `int` 和 `float` 类型变量声明
15. **布尔值** - 支持 `true` 和 `false`
16. **LR(1)分析表输出** - 自动生成分析表CSV文件
17. **项目集合输出** - 自动生成LR(1)项目集合文件

## 使用方法

### 编译

```bash
g++ -o compiler main.cpp
```

### 运行

```bash
./compiler
```

程序会编译示例代码并输出：
- 词法分析结果
- 语法分析过程
- 生成的三地址码
- LR(1)分析表（table.csv）
- LR(1)项目集合（items.txt）

## 支持的语法

### 基本语法结构

```
程序 -> 语句块
语句块 -> 语句; 语句块 | 语句; | while循环 语句块 | while循环
while循环 -> while ( 逻辑表达式 ) { 语句块 }
语句 -> 赋值语句 | 变量声明 | 表达式语句 | break | continue
赋值语句 -> 标识符 = 表达式
变量声明 -> int 标识符 | float 标识符 | int 标识符 = 表达式 | float 标识符 = 表达式
```

### 表达式语法

```
表达式 -> 表达式 + 项 | 表达式 - 项 | 项
项 -> 项 * 因子 | 项 / 因子 | 因子
因子 -> - 因子 | 标识符 | 数字 | ( 表达式 ) | 标识符++ | ++标识符 | 标识符-- | --标识符 | true | false
```

### 逻辑表达式语法

```
逻辑表达式 -> 逻辑表达式 || 逻辑与 | 逻辑与
逻辑与 -> 逻辑与 && 逻辑非 | 逻辑非
逻辑非 -> ! 逻辑非 | 比较表达式 | ( 逻辑表达式 ) | 布尔值
比较表达式 -> 表达式 关系运算符 表达式
关系运算符 -> > | < | == | >= | <= | !=
```

## 错误处理

### 词法错误

- **非法字符检测**：检测并报告非法字符
- **位置信息**：提供行号和列号
- **错误原因**：说明具体的错误原因

示例：
```
[词法错误] 第1行, 第10列: 非法字符 (遇到字符: '@')
```

### 语法错误

- **位置信息**：提供出错token的行号和列号
- **期望符号**：列出所有期望的符号
- **错误原因**：说明语法不匹配的原因

示例：
```
[语法错误] 第2行, 第15列: 遇到意外的符号 '}'
期望的符号: ';', 'while', 'int', 'float', 'i'
```

## 输出文件

- `table.csv` - LR(1)分析表（CSV格式）
- `items.txt` - LR(1)项目集合

## 示例代码

```cpp
while ( true ) { 
    float b_flag = 1.5 ; 
    if_val = a_var ; 
    while ( b < 1 ) { 
        break ; 
    } 
    continue ; 
    b = a_var ++ ; 
}
```

## 项目结构

```
x/
├── main.cpp              # 主程序文件
├── README.md            # 项目说明文档
├── 项目分析报告.md       # 功能实现分析报告
├── table.csv            # LR(1)分析表（运行时生成）
└── items.txt            # LR(1)项目集合（运行时生成）
```

## 技术特点

1. **LR(1)分析方法** - 使用LR(1)方法进行语法分析
2. **语义动作** - 在归约时执行语义动作生成三地址码
3. **回填技术** - 使用回填技术处理跳转地址
4. **错误恢复** - 基本的错误检测和报告机制

## 验收标准对照

| 验收项 | 状态 | 说明 |
|--------|------|------|
| 嵌套 | ✅ | 支持嵌套while循环 |
| 复合语句 | ✅ | 支持多个语句 |
| 关系运算(6种) | ✅ | >, <, ==, >=, <=, != |
| 逻辑运算(3种) | ✅ | \|\|, &&, ! |
| 赋值 | ✅ | 支持变量赋值 |
| 基本算术运算 | ✅ | +, -, *, / |
| 运算优先级 | ✅ | 正确实现优先级 |
| 运算结合性 | ✅ | 左结合 |
| 括号 | ✅ | 支持括号 |
| 词法报错 | ✅ | 位置+原因 |
| 语法报错 | ✅ | 位置+原因+期望符号 |
| 自增自减 | ✅ | ++i, i++, --i, i-- |
| continue/break | ✅ | 支持循环控制 |
| 其他特色 | ✅ | 变量声明、布尔值、分析表输出 |

## 作者

编译原理课程设计项目




